## 德说-第350期, 国产数据库厂商到底能不能做好开源?   
                                                  
### 作者                                                  
digoal                                                  
                                                  
### 日期                                                  
2025-07-16                                               
                                                  
### 标签                                                  
国产 , 数据库 , 开源         
                                                  
----                                                  
                                                  
## 背景     
提到国产开源数据库, 大家第一反应是什么?   
  
先让我猜一猜:   
- 是不是真开源啊? 作秀吧? 开源迭代能持久吗? 会不会烂尾啊?   
    - 这个问题其实在openHaloDB开源直播的时候, 我也问过老章.  [《德说-第319期, 这些问题回答不清, 开源很难持久!》](../202504/20250401_03.md)     
- 发issue的话, 厂家会不会理会啊?   
- 功能肯定比商业版差很多! 是不是商业阉割版啊? 是不是开出来多年前的版本(放到现在基本没价值)?   
- 代码稳定、靠谱吗?   
- 有没有人用啊?   
- 会不会是 PG或MySQL 修改后的换皮?   
- 文档健全吗? 按文档操作到底能不能部署起来?   
  
猜得不对的话欢迎留言指正!   
  
国产开源数据库真的不少, 下面列举了一些关系型国产开源数据库, 非关系赛道也有非常多优秀的国产产品暂不讨论!   
- PolarDB、HaloDB、IvorySQL、TDSQL、AntDB、OceanBase、TiDB、OpenGauss  
- ... 其他有了解的欢迎补充  
  
(这条是广告)其中最为特殊的是PolarDB, 先有云上的商业PolarDB云服务, 售卖了五六年之后才开源出来, 而且核心代码100%开源:   
- PG版内核 https://github.com/ApsaraDB/PolarDB-for-PostgreSQL  
- PG版PFS https://github.com/ApsaraDB/PolarDB-FileSystem  
- PG版镜像 https://github.com/ApsaraDB/polardb-pg-docker-images  
- MySQL分布式版中间件 https://github.com/polardb/polardbx-sql  
- MySQL分布式版内核 https://github.com/polardb/polardbx-engine  
  
先说一下, 以下内容不针对任何厂商, 怕被打.   
  
国产数据库厂商到底能不能做好开源, 应该从何说起?    
  
## 一、用户、客户、厂商都盼望的梦想状态  
  
就像雷布斯说的: 梦想总要有的, 万一实现了呢!   
  
用户、客户、厂商都盼望的国产开源数据库的梦想状态是什么样的?   
  
![pic](20250716_03_pic_001.jpg)    
  
个人总结了几点:   
  
1、商业版和开源版一致 或 核心代码一致!  (咱不能奢望厂商真的把核心代码都开源, 给厂商留点隐私.)     
  
这点非常重要, 用户会认为厂商是真心开源, 出了问题肯定也会积极修复. 因为代码一致的话, 商业用户也会遇到同样问题!    
  
开源和商业版一致, 也会降低研发成本, 否则得维护2个版本.    
  
另一方面, 如果用户使用的开源版本和商业版本一致(至少使用接口应该一致), 那么从从开源到商业版可以无缝衔接. 满足了厂商开源为商业引流的需求.   
  
2、大量用户使用开源   
  
这点非常重要. 用户多, 产品的问题收敛速度就越快、稳定性也会越高. 就像买车一样, 出货量大的车子型号迭代几个版本后一般来说没啥毛病, 跟风买就好了, 真有问题修理厂也多、可使用的零件也多. 买稀有品牌或型号可就惨了, 如果要更换零件, 可能买不到, 或者到货时间巨久.     
  
3、外部用户作为开发者积极的参与“问题反馈、讨论、feat投票、review代码、代码贡献”等   
  
这点也非常重要. 因为产品功能、代码将直接源于用户需求. 产品将更能满足用户代表的行业的场景需求; 而且用户越投入就越会形成惯性、沉没成本, 用户黏性将越高;   
  
例如, ZTE正在向PolarDB开源分支贡献大量代码. (这条是广告)   
  
4、生态丰富. 数据库是非常复杂、与企业内其他业务系统关联较多、且关键的系统. 管理维护成本较高.   
  
虽然开源, 但是维保的需求依然存在. 生态丰富(管控、监控诊断、维保服务等), 代表用户在遇到问题时可以有托底服务.   
  
5、人才多  
  
开发者都会用, 企业好招人.   
  
6、开源的商业价值体现. 商业做得好, 就有钱投入开源. 开源有商业价值, 才能持久的投入开源.   
  
厂商的每一笔投入最后都需通过商业来衡量.   
  
商业变现可以包括: 一体机、商业版软件License、云服务、维保服务、咨询服务、认证服务、培训服务等.   
  
## 二、到底谁会用国产开源数据库?   
  
都说人和人之间的成见是一座大山, 国产数据库似乎面临同样的问题.   
  
抛开成见, 应该问到底谁会用开源数据库? 如果国产做得一样好, 为什么不用国产? 国产还有语言和地域的优势呢~~~   
  
我认为不同用户可能在不同场景中使用到开源.   
  
可以把用户分为3个等级来看.   
  
1、自助型 对应 二等座  
  
典型的互联网型用户. 自己开发业务系统, 自己维护数据库, 更高级的甚至有自己的数据库分支.  
  
这类用户, 只要能切实解决他们的业务痛点(而且没有其他更好的选择时), 就可能用你的开源产品(包括核心系统).   
  
另外需要注意, 未来如果有更好的产品选择, 会毫不留情的抛弃之前的产品.   
  
这类用户就别推商业版了, 基本上不会使用国产商业版. 除非已上云, 可以推一推云服务看看.   
  
这种用户虽然没有什么商业价值. 但也不是一无是处, 例如也许能贡献点代码、高端人才, 案例可以拿来吹吹牛.   
  
2、小甲方 对应 一等座  
  
私企. IT部门无研发能力, 自己不开发, 采购业务系统的. 采购外部维保服务, 少有甚至没有专业运维人员.   
  
较小的企业通常软件开发商提供什么数据库就可能用什么数据库.   
  
稍大的企业可能也会要求开发商配合制定采购清单, 在多家数据库厂商中选择.   
  
大概率选择商业版, 因为软件开发商大概率不会有维保能力.   
  
维保服务商如果能提供开源版本的维保服务, 在可以帮助企业省下大笔钱的情况下有一定机会使用开源.   
  
核心系统用不用国产开源? 概率会随着国产开源口碑、案例越来越多而提升.   
  
所以要在小甲方中推国产开源, 必须把生态培养起来:   
  
这个钱会给周边生态工具产品, 例如 CLup、ApeCloud、Pigsty等数据库管控/备份恢复/高可用集成产品, DBdoctor等诊断监控产品.  这些生态工具不仅支持商业版也支持开源版.    
  
我记得有一期讲过类似话题: [《德说-第283期, 干掉Oracle的不是友商, 而是它!》](../202406/20240608_01.md)    
  
客户无需支付商业数据库License费用. 和云上客户买云开源数据库服务是一个道理.   
  
3、大甲方 对应 商务舱   
  
党政军, 国央企等.   
  
这些用户会不会用国产开源? 能用多少国产开源? 完全取决于国产商业版的价格.   
  
如果国产商业版的价格很低, 为什么要用开源呢?   
  
除非是假装用一下, 和厂商的利益交换就不得而知了. (服务器、GPU 资源置换?)     
  
如果国产商业版的价格很高(这个情况大概率不会出现, 现在数据库卷的要死, 感觉都恨不得不要钱让大甲方先用起来. 后面再慢慢收割.), 用不用国产开源? 概率会随着国产开源口碑、案例越来越多而提升.   
  
大甲方用国产开源数据库的隐藏好处之一: 降低单一厂商绑定风险. 最好是兼容主流开源数据库(PG,MySQL等)的开源数据库厂商(PolarDB, HaloDB, IvorySQL等 或 仅协议层兼容的OB, TiDB等))   
  
## 三、现实很残酷  
  
梦想总要有, 但是现实很残酷.   
  
![pic](20250716_03_pic_002.jpg)    
  
以下总结了目前国产开源数据库遇到的一些问题.   
  
1、开源是商业的阉割版  
  
开源的时候阉割掉不想开源的内容. 开源时感觉没啥问题, 但是遗留问题非常多. 例如   
  
等于宣布开源分支不接收任何外部代码, 为什么这么说呢? 外部贡献的代码可能和商业版代码起冲突.   
  
开源分支演进慢, 取决于商业研发团队心情. 未来商业版本迭代/bugfix后, 如果想演进开源分支, 又要来一次剥离和合并的动作, 无疑增加了商业研发团队的工作量.   
  
2、开源版本延迟高  
  
有些厂商可能会拿多年前的商业版进行开源, 确保开源和商业代际的差别.   
  
防止最新版本的代码被友商剽窃.   
  
也防止某些用户本来要买商业版的最终选择开源版本. (这可能是个伪问题, 后面会提到.)   
  
3、文档缺失或不完善  
  
出了问题找不到材料、也没有人支持  
  
维护成本高昂  
  
4、开源用户少, 开源项目活跃度低. 用户心里真没底.   
  
然后就会导致厂商对开源的投入逐渐减少, ISSUE 几乎没人响应, 答疑也几乎没人响应.   
  
类似虹吸效应. 这个在之前有一期讲过: [《德说-第321期, MySQL被O收购后, 将保持平庸》](../202504/20250416_01.md)    
  
5、某些烂尾的开源项目、开源套壳的国产项目, 打击了国产开源的口碑. 也是用户对国产开源数据库没有信心的原因之一.   
  
## 四、国产开源数据库 & 用户的GAP. 到底缺了什么?  
  
为什么用户对国产开源数据库有成见呢? 怎么能让用户用起来?   
  
还是分3类用户来聊聊.   
  
1、真自助 二等座  
  
这类用户属于动手能力强的, 但是肯定也不是把代码开源就够了. 还缺少什么呢? 我简单罗列了一些:   
  
吸引他们用的理由(行业场景相关: 产品特点、对比其他产品的优势).    
  
易用性, 别整太复杂, 最好能简单部署完成PoC, 体验产品特点.  
  
靠谱的文档真的很重要.  
  
解决方案、最佳实践、FAQ等.  
  
日常答疑的地方、反馈 issue 的入口.  
  
代码协作的机制.   
  
技术类活动.   
  
晋级体系. 提升用户侧专家的荣誉、用户黏性.   
  
2、小甲方 一等座    
  
重点需要让生态赚到钱、同时打消客户的维保顾虑. 还缺少什么呢? 我简单罗列了一些:   
  
生态工具(管控、监控诊断等)集成. 用户可选开源和商业版本.   
  
ISV认证. 让ISV支持开源和商业版本.   
  
维保服务. 让三方维保公司同时支持开源和商业版本维保.  
  
培训服务. 让三方赚到钱.  
  
认证体系和服务. 让三方赚到钱.  
  
3、大甲方 商务舱   
  
还缺少什么呢? 我简单罗列了一些:   
  
和小甲方一样, 开源还是要靠生态的支持, 重点需要让生态赚到钱(一体机、备份工具、管控软件、监控诊断、维保服务等).    
  
大甲方使用开源可能还会额外要求原厂托底的bugfix、咨询服务等.  
  
## 五、一定要开源吗?   
  
开源. 干得好就能形成复利效应.  
  
没干好? 那就是当雷锋: 代码被抄袭. 浪费资源. 砸口碑.   
  
开源需要长期有策略的投入. 最怕嘴里说长期, 实际只看短期收益. 是不是能持久开源, 答案恐怕只能交给时间了!   
  
一个开源项目理论上要经过很多年才会成熟, PG/MySQL这种经典的产品也不例外, 甚至包括现在特别火的DuckDB, 哪个不是10年以上才相对成熟的? 只不过现在大家吃惯了快餐, 脑子里可能会觉得开源出来马上就要成功.   
  
有兴趣的朋友可以去github看各种开源项目的提交历史, 结合你脑子里觉得成熟稳定的版本, 看看相隔了多少年?   
  
例如PG 8.4/9.0 支持了无内存限制的垃圾版本跟踪/流复制 (2009/2010年)可能是个分割线, 相比1996的初版已过去10余年.   
- https://github.com/postgres/postgres/graphs/contributors  
  
---  
  
国产数据库厂商到底能不能做好开源?   
  
你有什么看法, 欢迎留言.   
    
  
  
